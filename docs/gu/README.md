ркорлЛркмрк╛ркИрк▓ркЯрлНркЯрлЛ
 ==========

 Mobiletto ркП JavaScript рк╕рлНркЯрлЛрк░рлЗркЬ ркПркмрлНрк╕рлНркЯрлНрк░рлЗркХрлНрк╢рки рк▓рлЗркпрк░ ркЫрлЗ, ркЬрлЗркорк╛ркВ рк╡рлИркХрк▓рлНрккрк┐ркХ рккрк╛рк░ркжрк░рлНрк╢ркХ ркХрлНрк▓рк╛ркпркирлНркЯ-рк╕рк╛ркЗркб ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки ркЫрлЗ.

 # рк╕рк╛ркоркЧрлНрк░рлА
 * [ркХрлЗрко ркорлЛркмрк╛ркИрк▓ркЯрлЛ?](#Why-Mobiletto?)
 * [ркЭркбрккрлА рк╢рк░рлВркЖркд](#ркЭркбрккрлА-рк╢рк░рлВркЖркд)
 * [Mobiletto CLI](#mobiletto-cli)
 * [рк╕рлНрк░рлЛркд](#рк╕рлНрк░рлЛркд)
 * [ркорлВрк│ркнрлВркд рк╡рккрк░рк╛рк╢](#ркорлВрк│ркнрлВркд-ркЙрккркпрлЛркЧ)
 * [ркорлЗркЯрк╛ркбрлЗркЯрк╛](#ркорлЗркЯрк╛ркбрлЗркЯрк╛)
 * [рк╡рлИркХрк▓рлНрккрк┐ркХ ркЖркпрк╛ркд рк╢рлИрк▓рлА](#рк╡рлИркХрк▓рлНрккрк┐ркХ-ркЖркпрк╛ркд-рк╢рлИрк▓рлА)
 * [ркХрлЗрк╢рк┐ркВркЧ](#ркХрлЗрк╢рк┐ркВркЧ)
 * [ркорк┐рк░рк░рк┐ркВркЧ](#ркорк┐рк░рк░рк┐ркВркЧ)
 * [рккрк╛рк░ркжрк░рлНрк╢ркХ ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки](#рккрк╛рк░ркжрк░рлНрк╢ркХ-ркПркиркХрлНрк░рк┐рккрлНрк╢рки)
 * [ркХрлА рк░рлЛркЯрлЗрк╢рки](#ркХрлА-рк░рлЛркЯрлЗрк╢рки)
 * [ркбрлНрк░рк╛ркИрк╡рк░ ркИркирлНркЯрк░рклрлЗрк╕](#ркбрлНрк░рк╛ркИрк╡рк░ ркИркирлНркЯрк░рклрлЗрк╕)
 * [рк▓рлЛркЧрк┐ркВркЧ](#рк▓рлЛркЧрк┐ркВркЧ)

 # ркЖркирлЗ ркмрлАркЬрлА ркнрк╛рк╖рк╛ркорк╛ркВ рк╡рк╛ркВркЪрлЛ
 ркЖ README.md ркжрк╕рлНркдрк╛рк╡рлЗркЬркирлЛ ркЕркирлБрк╡рк╛ркж [hokeylization](https://github.com/cobbzilla/hokeylization) ркжрлНрк╡рк╛рк░рк╛ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ ркЫрлЗ,
 **[Google ркЕркирлБрк╡рк╛ркж ркжрлНрк╡рк╛рк░рк╛ рк╕ркорк░рлНркерк┐ркд ркжрк░рлЗркХ ркнрк╛рк╖рк╛](https://cloud.google.com/translate/docs/languages)!**

 ркоркирлЗ ркЦрк╛ркдрк░рлА ркЫрлЗ ркХрлЗ ркдрлЗ рк╕ркВрккрлВрк░рлНркг ркиркерлА, рккрк░ркВркдрлБ рк╣рлБркВ ркЖрк╢рк╛ рк░рк╛ркЦрлБркВ ркЫрлБркВ ркХрлЗ ркдрлЗ ркХркВркИ ркХрк░ркдрк╛ркВ рк╡ркзрлБ рк╕рк╛рк░рлБркВ ркЫрлЗ!

 [ЁЯЗ╕ЁЯЗж ркЕрк░ркмрлА](../ar/README.md)
 [ЁЯЗзЁЯЗй ркмркВркЧрк╛рк│рлА](../bn/README.md)
 [ЁЯЗйЁЯЗк ркЬрк░рлНркорки](../de/README.md)
 [ЁЯЗ║ЁЯЗ╕ ркЕркВркЧрлНрк░рлЗркЬрлА](../en/README.md)
 [ЁЯЗкЁЯЗ╕ рк╕рлНрккрлЗркирк┐рк╢](../es/README.md)
 [ЁЯЗлЁЯЗ╖ рклрлНрк░рлЗркирлНркЪ](../fr/README.md)
 [ЁЯЗ╣ЁЯЗй рк╣рлМрк╕рк╛](../ha/README.md)
 [ЁЯЗоЁЯЗ│ рк╣рк┐ркирлНркжрлА](../hi/README.md)
 [ЁЯЗоЁЯЗй ркЗркирлНркбрлЛркирлЗрк╢рк┐ркпрки](../id/README.md)
 [ЁЯЗоЁЯЗ╣ ркЗркЯрк╛рк▓рк┐ркпрки](../it/README.md)
 [ЁЯЗпЁЯЗ╡ ркЬрк╛рккрк╛ркирлАркЭ](../ja/README.md)
 [ЁЯЗ░ЁЯЗ╖ ркХрлЛрк░рк┐ркпрки](../ko/README.md)
 [ЁЯЗоЁЯЗ│ ркорк░рк╛ркВркарлА](../mr/README.md)
 [ЁЯЗ╡ЁЯЗ▒ рккрлЛрк▓рк┐рк╢](../pl/README.md)
 [ЁЯЗзЁЯЗ╖ рккрлЛрк░рлНркЯрлБркЧрлАркЭ](../pt/README.md)
 [ЁЯЗ╖ЁЯЗ║ рк░рк╢рк┐ркпрки](../ru/README.md)
 [ЁЯЗ░ЁЯЗк рк╕рлНрк╡рк╛рк╣рк┐рк▓рлА](../sw/README.md)
 [ЁЯЗ╡ЁЯЗн ркЯрк╛ркЧрк╛рк▓рлЛркЧ](../tl/README.md)
 [ЁЯЗ╣ЁЯЗ╖ ркЯрк░рлНркХрк┐рк╢](../tr/README.md)
 [ЁЯЗ╡ЁЯЗ░ ркЙрк░рлНркжрлБ](../ur/README.md)
 [ЁЯЗ╗ЁЯЗ│ рк╡рк┐ркпрлЗркдркирк╛ркорлАрк╕](../vi/README.md)
 [ЁЯЗиЁЯЗ│ ркЪрк╛ркЗркирлАркЭ](../zh/README.md)


 **[ЁЯУЪ ... ркмркзрлА ркнрк╛рк╖рк╛ркУ ...](../README.md)**
 ----

 ### рк╢рлБркВ README ркирк╛ ркЖ ркЕркирлБрк╡рк╛ркжркорк╛ркВ ркХрлЛркИ рк╕ркорк╕рлНркпрк╛ ркЫрлЗ?
 ркорлВрк│ [README](https://github.com/cobbzilla/mobiletto/blob/master/README.md) ркирлЛ ркЖ рк╡рк┐рк╢рк┐рк╖рлНркЯ ркЕркирлБрк╡рк╛ркж
 ркЦрк╛ркорлА рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ -- *рк╕рлБркзрк╛рк░рк╛ркУ ркЦрлВркм ркЖрк╡ркХрк╛рк░рлНркп ркЫрлЗ!* ркХрлГрккрк╛ ркХрк░рлАркирлЗ [GitHub рккрк░ рккрлБрк▓ рк╡рк┐ркиркВркдрлА](https://github.com/cobbzilla/mobiletto/pulls) ркорлЛркХрк▓рлЛ,
 ркЕркерк╡рк╛ ркЬрлЛ ркдркоркирлЗ ркдрлЗ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк░рк╛ркоркжрк╛ркпркХ рки рк╣рлЛркп, ркдрлЛ [рк╕ркорк╕рлНркпрк╛ ркЦрлЛрк▓рлЛ](https://github.com/cobbzilla/mobiletto/issues)

 ркЬрлНркпрк╛рк░рлЗ ркдркорлЗ ркЕркирлБрк╡рк╛ркж рк╡рк┐рк╢рлЗ ркирк╡рлЛ GitHub ркорлБркжрлНркжрлЛ ркмркирк╛рк╡рлЛ ркЫрлЛ, ркдрлНркпрк╛рк░рлЗ ркХрлГрккрк╛ ркХрк░рлАркирлЗ ркЖ ркХрк░рлЛ:
 * рккрлГрк╖рлНрка URL рк╢рк╛ркорлЗрк▓ ркХрк░рлЛ (ркмрлНрк░рк╛ркЙркЭрк░ рк╕рк░ркирк╛ркорк╛ркВ ркмрк╛рк░ркорк╛ркВркерлА ркХрлЙрккрк┐/рккрлЗрк╕рлНркЯ ркХрк░рлЛ)
 * ркЦрлЛркЯрлЛ рк▓ркЦрк╛ркг рк╢рк╛ркорлЗрк▓ ркХрк░рлЛ (ркмрлНрк░рк╛ркЙркЭрк░ркорк╛ркВркерлА ркХрлЙрккрк┐/рккрлЗрк╕рлНркЯ ркХрк░рлЛ)
 * ркХрлГрккркпрк╛ рк╢рлБркВ ркЦрлЛркЯрлБркВ ркЫрлЗ ркдрлЗркирлБркВ рк╡рк░рлНркгрки ркХрк░рлЛ -- рк╢рлБркВ ркЕркирлБрк╡рк╛ркж ркЦрлЛркЯрлЛ ркЫрлЗ? рк╢рлБркВ рклрлЛрк░рлНркорлЗркЯрк┐ркВркЧ ркХрлЛркИркХ рк░рлАркдрлЗ ркдрлВркЯрлА ркЧркпрлБркВ ркЫрлЗ?
 * ркХрлГрккрк╛ ркХрк░рлАркирлЗ рк╡ркзрлБ рк╕рк╛рк░рк╛ ркЕркирлБрк╡рк╛ркжркирлБркВ рк╕рлВркЪрки ркЖрккрлЛ, ркЕркерк╡рк╛ ркЯрлЗркХрлНрк╕рлНркЯ ркХрлЗрк╡рлА рк░рлАркдрлЗ ркпрлЛркЧрлНркп рк░рлАркдрлЗ рклрлЛрк░рлНркорлЗркЯ ркерк╡рлЛ ркЬрлЛркИркП
 * **ркЖркнрк╛рк░!**

 ## ркорлЛркмрк╛ркИрк▓ркЯрлНркЯрлЛ рк╢рк╛ ркорк╛ркЯрлЗ?

 ### ркЧрлБркбркмрк╛ркп рк╡рлЗркирлНркбрк░ рк▓рлЛркХ-ркЗрки!
 рк╡рк┐рк╡рк┐ркз ркХрлНрк▓рк╛ркЙркб рк╕рлНркЯрлЛрк░рлЗркЬ рккрлНрк░ркжрк╛ркдрк╛ркУ рккрк╛рк╕рлЗ ркЕрк╕ркВркЧркд API ркЫрлЗ. ркдрлЗ рккркг ркЬрлЗркУ "S3 рк╕рлБрк╕ркВркЧркдркдрк╛" ркорк╛ркЯрлЗ рккрлНрк░ркпркдрлНрки ркХрк░рлЗ ркЫрлЗ
 рк░рлВркврк┐ркЪрлБрк╕рлНркд рк╡рк░рлНркдрки ркзрк░рк╛рк╡рлЗ ркЫрлЗ.

 ркЬрлНркпрк╛рк░рлЗ ркдркорлЗ ркдркорк╛рк░рлА ркПрккрлНрк▓рк┐ркХрлЗрк╢рки ркорк╛ркЯрлЗ ркХрлЛркИ ркЪрлЛркХрлНркХрк╕ рк╕рлНркЯрлЛрк░рлЗркЬ рк╡рк┐ркХрлНрк░рлЗркдрк╛ рккрк╕ркВркж ркХрк░рлЛ ркЫрлЛ, ркЬрлЛ ркдркорлЗ рк╕рлАркзрк╛ ркдрлЗркоркирк╛ API рккрк░ ркХрлЛркб ркХрк░рлЛ ркЫрлЛ, ркдрлЛ ркдркорк╛рк░рлА ркПрккрлНрк▓рк┐ркХрлЗрк╢рки
 рк╣рк╡рлЗ ркдрлЗ рк╕рлЗрк╡рк╛ рккрк░ ркирк┐рк░рлНркнрк░ ркЫрлЗ. ркЬрлЗрко ркЬрлЗрко рк╕ркоркп рккрк╕рк╛рк░ ркерк╛ркп ркЫрлЗ ркЕркирлЗ ркХрлЛркб ркПркХркарк╛ ркерк╛ркп ркЫрлЗ ркдрлЗрко, ркмркжрк▓рк╛ркдрк╛ рк╡рк┐ркХрлНрк░рлЗркдрк╛ркУ ркмркирлА ркЬрк╛ркп ркЫрлЗ
 рк╡ркзрлБркирлЗ рк╡ркзрлБ ркЕрк╕ркорк░рлНрке. рк╡рлЗркирлНркбрк░ рк▓рлЛркХ-ркЗркиркирлА ркоркирлЛрк░ркВркЬркХ ркжрлБркирк┐ркпрк╛ркорк╛ркВ ркЖрккркирлБркВ рк╕рлНрк╡рк╛ркЧркд ркЫрлЗ!

 Mobiletto ркЖ рк╕ркорк╕рлНркпрк╛ркирлЗ ркЙркХрлЗрк▓рк╡рк╛ ркорк╛ркЯрлЗ ркбрк┐ркЭрк╛ркЗрки ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА рк╣ркдрлА. ркдркорк╛рк░рлА ркПрккрлНрк▓рк┐ркХрлЗрк╢ркиркирлЗ mobiletto ркирк╛ API рккрк░ ркХрлЛркбрк┐ркВркЧ ркХрк░рлАркирлЗ, ркдркорлЗ рк╕рк░рк│ркдрк╛ркерлА ркХрк░рлА рк╢ркХрлЛ ркЫрлЛ
 рк╕рлНркЯрлЛрк░рлЗркЬ рккрлНрк░ркжрк╛ркдрк╛ркУ ркмркжрк▓рлЛ ркЕркирлЗ ркЬрк╛ркгрлЛ ркХрлЗ ркдркорк╛рк░рлА ркПрккрлНрк▓рк┐ркХрлЗрк╢ркиркирлБркВ рк╕рлНркЯрлЛрк░рлЗркЬ рк╕рлНркдрк░ рк╕ркорк╛рки рк░рлАркдрлЗ рк╡рк░рлНркдрлЗ ркЫрлЗ.

 ### рк╡рлНркпрк╛рккркХ рккрк░рлАркХрлНрк╖ркг
 ркжрк░рлЗркХ ркбрлНрк░рк╛ркЗрк╡рк░ ркорк╛ркЯрлЗ 60+ рккрк░рлАркХрлНрк╖ркгрлЛ рк╕рк╛ркерлЗ рк╕ркорк╛рки рк╡рк░рлНркдрки ркорк╛ркЯрлЗ ркмркзрк╛ ркбрлНрк░рк╛ркЗрк╡рк░рлЛркирлБркВ рккрк░рлАркХрлНрк╖ркг ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ.
 ркЕркорлЗ ркжрк░рлЗркХ рк╕ркВркпрлЛркЬрки рк╕рк╛ркерлЗ ркдркорк╛рко ркбрлНрк░рк╛ркЗрк╡рк░рлЛркирлБркВ рккрк░рлАркХрлНрк╖ркг ркХрк░рлАркП ркЫрлАркП:
 * ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки: рк╕ркХрлНрк╖рко ркЕркирлЗ ркЕркХрлНрк╖рко ркмркВркирлЗ
 * рк░рлАркбрлАрк╕ ркХрлЗрк╢: ркмркВркирлЗ рк╕ркХрлНрк╖рко ркЕркирлЗ ркЕркХрлНрк╖рко

 ркЖ ркЕркнрк┐ркЧрко ркЕркоркирлЗ ркоркиркирлА рк╢рк╛ркВркдрк┐ ркЖрккрлЗ ркЫрлЗ ркХрлЗ ркдркорлЗ ркЧркорлЗ ркдрлЗ ркбрлНрк░рк╛ркЗрк╡рк░ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЛ ркЫрлЛ, ркорлЛркмрк╛ркЗрк▓ркЯрлЛ ркП ркЬ рк╡рк░рлНркдрки ркХрк░рк╢рлЗ,
 ркЕркирлЗ ркдркорлЗ ркХрлЗрк╢рлАркВркЧ ркЕркирлЗ/ркЕркерк╡рк╛ ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки рк╕ркХрлНрк╖рко ркХрк░рлЛ ркЫрлЛ ркХрлЗ ркХрлЗрко ркдрлЗ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлАркзрк╛ рк╡ркЧрк░.

 ### ркбрлНрк░рк╛ркИрк╡рк░ рк╕рккрлЛрк░рлНркЯ
 рк╡рк░рлНркдркорк╛рки ркорлЛркмрк╛ркЗрк▓ркЯрлЛ рк╕рлНркЯрлЛрк░рлЗркЬ ркбрлНрк░рк╛ркЗрк╡рк░рлЛ:
 * `s3` : Amazon S3
 * `b2` : ркмрлЗркХркмрлНрк▓рлЗркЭ B2
 * `local` : рк╕рлНркерк╛ркирк┐ркХ рклрк╛ркЗрк▓рк╕рк┐рк╕рлНркЯрко

 *рк╡ркзрлБ ркХрлНрк▓рк╛ркЙркб рк╕рлНркЯрлЛрк░рлЗркЬ рккрлНрк░ркжрк╛ркдрк╛ркУркирлЗ рк╕ркорк░рлНркерки ркЖрккрк╡рк╛ ркорк╛ркЯрлЗ ркпрлЛркЧркжрк╛рки ркЦрлВркм ркЖрк╡ркХрк╛рк░рлНркп ркЫрлЗ!*

 ## mobiletto-cli
 Mobiletto ркЕркирлНркп JavaScript ркХрлЛркб ркжрлНрк╡рк╛рк░рк╛ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА ркдрк░рлАркХрлЗ ркЙрккркпрлЛркЧркорк╛ркВ рк▓рлЗрк╡рк╛ркирлЛ ркЫрлЗ.

 ркХркорк╛ркирлНркб-рк▓рк╛ркЗрки рккрк░ mobiletto рк╕рк╛ркерлЗ ркХрк╛рко ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ, [mobiletto-cli](https://www.npmjs.com/package/mobiletto-cli) ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЛ

 ## рк╕рлНркдрлНрк░рлЛркд
 * [ркЧрлАркерк╣ркм рккрк░ ркорлЛркмрк╛ркИрк▓](https://github.com/cobbzilla/mobiletto)
 * [ркПркирккрлАркПрко рккрк░ ркорлЛркмрк╛ркЗрк▓рлЗркЯрлЛ](https://www.npmjs.com/package/mobiletto)

 ## ркЭркбрккрлА рк╢рк░рлВркЖркд
 Mobiletto `s3` ркбрлНрк░рк╛ркЗрк╡рк░ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рк╡рк╛ркирлБркВ ркЯрлВркВркХрлБркВ ркЙркжрк╛рк╣рк░ркг.

 ркЬрлЛ ркбрлНрк░рк╛ркЗрк╡рк░ `b2` ркЕркерк╡рк╛ `local` рк╣рлЛркд ркдрлЛ ркЖ ркХрлЛркб рк╕ркорк╛рки ркЪрк╛рк▓рк╢рлЗ.

    const storage = require('mobiletto')
    const bucket = await storage.connect('s3', aws_key, aws_secret, {bucket: 'bk'})

    // list objects: returns array of metadata objects
    const listing = await bucket.list()
    const dirList = await bucket.list('some/dir/')
    const everything = await bucket.list('', {recursive: true})

    // write an entire file
    let bytesWritten = await bucket.writeFile('some/path', someBufferOfData)

    // write a file from a stream/generator
    bytesWritten = await bucket.write('some/path', streamOrGenerator)

    // read an entire file
    // returns null if an exception would otherwise be thrown
    const bufferOrNull = await bucket.safeReadFile('some/path')

    // stream-read a file, passing data to callback
    const bytesRead = await bucket.read('some/path', (chunk) => { ...do something with chunk... } )

    // remove a file, returns the path removed
    let removed = await bucket.remove('some/path') // removed is a string

    // remove a directory, returns array of paths removed
    removed = await bucket.remove('some/directory', {recursive: true}) // removed is now an array!

 ----
 ## ркорлВрк│ркнрлВркд ркЙрккркпрлЛркЧ
 ркПркХ рк╡ркзрлБ рк╡рлНркпрк╛рккркХ ркЙркжрк╛рк╣рк░ркг, ркУрклрк░ ркХрк░рк╛ркпрлЗрк▓рлА ркорлЛркЯрк╛ркнрк╛ркЧркирлА рк╕рлБрк╡рк┐ркзрк╛ркУ ркжрк░рлНрк╢рк╛рк╡рлЗ ркЫрлЗ:

    const { mobiletto } = require('mobiletto')

    // General usage
    const api = await mobiletto(driverName, key, secret, opts)

    // To use 'local' driver:
    // * key: base directory
    // * secret: ignored, can be null
    // * opts object:
    // * readOnly: optional, never change anything on the filesystem; default is false
    // * fileMode: optional, permissions used when creating new files, default is 0600. can be string or integer
    // * dirMode: optional, permissions used when creating new directories, default is 0700. can be string or integer
    const local = await mobiletto('local', '/home/ubuntu/tmp', null, {fileMode: 0o0600, dirMode: '0700'})

    // To use 's3' driver:
    // * key: AWS Access Key ID
    // * secret: AWS Secret Key
    // * opts object:
    // * readOnly: optional, never change anything on the bucket; default is false
    // * bucket: required, name of the S3 bucket
    // * region: optional, the AWS region to communicate with, default is us-east-1
    // * prefix: optional, all read/writes within the S3 bucket will be under this prefix
    // * delimiter: optional, directory delimiter, default is '/' (note: always '/' when encryption is enabled)
    const s3 = await mobiletto('s3', aws_key, aws_secret, {bucket: 'bk', region: 'us-east-1'})

    // To use 'b2' driver:
    // * key: Backblaze Key ID
    // * secret: Backblaze Application Key
    // * opts object:
    // * readOnly: optional, never change anything on the bucket; default is false
    // * bucket: required, the ID (**not the name**) of the B2 bucket
    // * prefix: optional, all read/writes within the B2 bucket will be under this prefix
    // * delimiter: optional, directory delimiter, default is '/' (note: always '/' when encryption is enabled)
    // * partSize: optional, large files will be split into chunks of this size when uploading
    const b3 = await mobiletto('b2', b2_key_id, b2_app_key, {bucket: 'bk', partSize: 10000000})

    // List files
    api.list() // --> returns an array of metadata objects

    // List files recursively
    api.list({ recursive: true })

    // List files in a directory
    const path = 'some/path'
    api.list(path)
    api.list(path, { recursive: true }) // also supports recursive flag

    // Visit files in a directory -- visitor function must be async
    api.list(path, { visitor: myAsyncFunc })
    api.list(path, { visitor: myAsyncFunc, recursive: true })

    // The `list` method throws MobilettoNotFoundError if the path does not exist
    // When you call `safeList` on a non-existent path, it returns an empty array
    api.safeList('/path/that/does/not/exist') // returns []
    
    // Read metadata for a file
    api.metadata(path) // returns metadata object

    // The `metadata` method throws MobilettoNotFoundError if the path does not exist
    // When you call `safeMetadata` on a non-existent path, it returns null
    api.safeMetadata('/tmp/does_not_exist') // returns null
    
    // Read a file
    // Provide a callback that writes the data someplace
    const callback = (chunk) => { ... write chunk somewhere ... }
    api.read(path, callback) // returns count of bytes read

    // Read an entire file at once
    const data = await api.readFile(path) // returns a byte Buffer of the file contents
    
    // Read an entire file at once
    // returns null if an exception would otherwise be thrown
    const bufferOrNull = await bucket.safeReadFile('some/path')

    // Write a file
    // Provide a generator function that yields chunks of data
    const generator = function* () {
      while ( ... more-data-to-return ... ) {
        data = ... load-data ...
        yield data
      }
    }
    local.api(path, generator) // returns count of bytes written

    // Write an entire file at once (convenience method)
    await api.writeFile(path, bufferOrString) // returns count of bytes written

    // Delete a file
    // Quiet param is optional (default false), when set errors will not be thrown if the path does not exist
    // Always returns a value or throws an error.
    // Return value may be a single string of the file removed, or an array of all files removed (driver-dependent)
    const quiet = true
    api.remove(path, {quiet}) // returns single path removed

    // Recursively delete a directory and do it quietly (do not report errors)
    const recursive = true
    const quiet = true
    api.remove(path, {recursive, quiet}) // returns array of paths removed

 ## ркорлЗркЯрк╛ркбрлЗркЯрк╛
 `metadata` ркЖркжрлЗрк╢ рк╕рк┐ркВркЧрк▓ рклрк╛ркЗрк▓рк╕рк┐рк╕рлНркЯрко ркПркирлНркЯрлНрк░рлА рк╡рк┐рк╢рлЗ ркорлЗркЯрк╛ркбрлЗркЯрк╛ рккрк░ркд ркХрк░рлЗ ркЫрлЗ.
 ркдрлЗрк╡рлА ркЬ рк░рлАркдрлЗ, `list` ркЖркжрлЗрк╢ркорк╛ркВркерлА рк╡рк│ркдрк░ ркорлВрк▓рлНркп ркП ркорлЗркЯрк╛ркбрлЗркЯрк╛ ркСркмрлНркЬрлЗркХрлНркЯрлНрк╕ркирлА ркПрк░рлЗ ркЫрлЗ.

 ркорлЗркЯрк╛ркбрлЗркЯрк╛ ркСркмрлНркЬрлЗркХрлНркЯ ркЖркирк╛ ркЬрлЗрк╡рлЛ ркжрлЗркЦрк╛ркп ркЫрлЗ:

    {
      "name": "fully/qualified/path/to/file",
      "type": "entry-type",
      "size": size-in-bytes,
      "ctime": creation-time-epoch-millis,
      "mtime": modification-time-epoch-millis
    }

 `type` ркЯрк╛ркЗркк` ркЧрлБркгркзрк░рлНрко `file` `dir` , `link` ркЕркерк╡рк╛ `special` ркЫрлЗ.

 ркбрлНрк░рк╛ркЗрк╡рк░ркирк╛ рккрлНрк░ркХрк╛рк░ рккрк░ ркЖркзрк╛рк░ рк░рк╛ркЦрлАркирлЗ, `list` ркЖркжрлЗрк╢ ркХркжрк╛ркЪ ркдркорк╛рко ркХрлНрк╖рлЗркдрлНрк░рлЛ рккрк░ркд ркХрк░рлА рк╢ркХрк╢рлЗ ркирк╣рлАркВ. `name` ркЕркирлЗ `type` рккрлНрк░ркХрк╛рк░` ркЧрлБркгркзрк░рлНркорлЛ
 рк╣ркВркорлЗрк╢рк╛ рк╣рк╛ркЬрк░ рк░рк╣рлЗрк╡рлБркВ ркЬрлЛркИркП. ркЕркирлБркЧрк╛ркорлА `metadata` ркЖркжрлЗрк╢ ркдркорк╛рко ркЙрккрк▓ркмрлНркз ркЧрлБркгркзрк░рлНркорлЛ рккрк░ркд ркХрк░рк╢рлЗ.

 ## рк╡рлИркХрк▓рлНрккрк┐ркХ ркЖркпрк╛ркд рк╢рлИрк▓рлА
 рк╕ркВрккрлВрк░рлНркг-рк╕рлНркХрлЛрккрк╡рк╛рк│рк╛ ркорлЛркбрлНркпрлБрк▓ркирлЗ ркЖркпрк╛ркд ркХрк░рлЛ ркЕркирлЗ `connect` рклркВркХрлНрк╢ркиркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЛ:

    const storage = require('mobiletto')
    const opts = {bucket: 'bk', region: 'us-east-1'}
    const s3 = await storage.connect('s3', aws_key, aws_secret, opts)
    const objectData = await s3.readFile('some/path')

 ## ркХрлЗрк╢рлАркВркЧ
 <a href="https://redis.io">Mobiletto</a> рк░рлЗркбрк┐рк╕ ркХрлЗрк╢ рк╕рк╛ркерлЗ рк╢рлНрк░рлЗрк╖рлНрка ркХрк╛рко ркХрк░рлЗ ркЫрлЗ.

 Mobiletto 127.0.0.1:6379 рккрк░ redis ркЗркирлНрк╕рлНркЯркирлНрк╕ рк╕рк╛ркерлЗ ркХркирлЗркХрлНркЯ ркХрк░рк╡рк╛ркирлЛ рккрлНрк░ркпрк╛рк╕ ркХрк░рк╢рлЗ

 ркдркорлЗ ркЖркорк╛ркВркерлА ркХрлЛркИрккркг рккрк░ рклрк░рлАркерлА рк▓ркЦрлА рк╢ркХрлЛ ркЫрлЛ:
 * `MOBILETTO_REDIS_HOST` env var рк╕рлЗркЯ ркХрк░рлЛ, mobiletto ркЕрк╣рлАркВ рк▓рлЛркХрк▓рк╣рлЛрк╕рлНркЯркирлЗ ркмркжрк▓рлЗ ркХркирлЗркХрлНркЯ ркХрк░рлЛ
 * `MOBILETTO_REDIS_PORT` env var рк╕рлЗркЯ ркХрк░рлЛ, ркЖ рккрлЛрк░рлНркЯркирлЛ ркЙрккркпрлЛркЧ ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рк╢рлЗ

 Mobiletto ркдрлЗркирлА ркдркорк╛рко redis ркХрлАркирлЗ `_mobiletto__` ркЙрккрк╕рк░рлНркЧ рк╕рк╛ркерлЗ рк╕ркВркЧрлНрк░рк╣рк┐ркд ркХрк░рк╢рлЗ. ркдркорлЗ ркЖ ркмркжрк▓рлА рк╢ркХрлЛ ркЫрлЛ
 `MOBILETTO_REDIS_PREFIX` env var рк╕рлЗркЯ ркХрк░рлАркирлЗ.

 ркдркорлЗ `opts.redisConfig` ркСркмрлНркЬрлЗркХрлНркЯ рк╕рк╛ркерлЗ рккрлНрк░ркдрк┐-ркХркирлЗркХрлНрк╢рки ркХрлЗрк╢рлАркВркЧ рккркг рк╕рлЗркЯ ркХрк░рлА рк╢ркХрлЛ ркЫрлЛ:

    const redisConfig = {
        enabled: true, // optional, default is true. if false other props are ignored
        host: '127.0.0.1',
        port: 6379,
        prefix: '_mobiletto__'
    }
    const opts = { redisConfig, bucket: 'bk', region: 'us-east-1' }
    const s3 = await storage.connect('s3', aws_key, aws_secret, opts)

 ### рк░рлЗркбрк┐рк╕ ркХрлЗрк╢рлАркВркЧ ркиркерлА ркЬрлЛркИркдрлБркВ?
 ркЕркХрлНрк╖рко ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ: ркЬрлНркпрк╛рк░рлЗ ркдркорлЗ ркдркорк╛рк░рлБркВ ркХркирлЗркХрлНрк╢рки рк╕рлНркерк╛рккрк┐ркд ркХрк░рлЛ ркдрлНркпрк╛рк░рлЗ ркдркорк╛рк░рк╛ `opts.redisConfig` ркСркмрлНркЬрлЗркХрлНркЯркорк╛ркВ `enabled: false` false` рккрк╛рк╕ ркХрк░рлЛ.

 ркирлАркЪрлЗ ркЪрк░рлНркЪрк╛ ркХрк░рлНркпрк╛ ркорлБркЬркм, ркХрлЗрк╢рлАркВркЧркирлЗ ркЕркХрлНрк╖рко ркХрк░рк╡рк╛ркерлА ркХрк╛ркоркЧрлАрк░рлА рккрк░ рккрлНрк░ркдрк┐ркХрлВрк│ ркЕрк╕рк░ рккркбрк╢рлЗ ркЕркирлЗ рк╡ркзрлБ рк╡рк┐ркиркВркдрлАркУ ркерк╢рлЗ
 рк╕рлНркЯрлЛрк░рлЗркЬ ркорк╛ркЯрлЗ ркЬрлЗ ркдркорк╛рк░рлЗ ркЦрк░рлЗркЦрк░ ркЬрк░рлВрк░рлА ркЫрлЗ.

 ### ркХрлЗрк╢рлАркВркЧ ркорк╛рк░рлНркЧркжрк░рлНрк╢рки
 **ркПркиркХрлНрк░рк┐рккрлНркЯрлЗркб рк╕рлНркЯрлЛрк░рлЗркЬ**: ркПркирлНркХрлНрк░рк┐рккрлНркЯрлЗркб рк╕рлНркЯрлЛрк░рлЗркЬ рк╡рк╛ркВркЪрк╡рлБркВ/рк▓рлЗркЦрк╡рлБркВ рк╕рк╛ркорк╛ркирлНркп ркХрк░ркдрк╛ркВ ркерлЛркбрлБркВ ркзрлАркорлБркВ ркЫрлЗ,
 рккрк░ркВркдрлБ ркбрк┐рк░рлЗркХрлНркЯрк░рлАркУркирлА ркЖрк╕рккрк╛рк╕ ркирлЗрк╡рк┐ркЧрлЗркЯ ркХрк░рк╡рлБркВ (ркЬрлЗ ркХрлЗркЯрк▓рлАркХ рк╡рк╕рлНркдрлБркУ ркХрк░рлЗ ркЫрлЗ) ркПркХркжрко ркЦрк░рлНркЪрк╛рк│ ркЫрлЗ. рк░рлЗркбрк┐рк╕ ркХрлЗрк╢ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлАркирлЗ
 ркдркоркирлЗ ркирлЛркВркзрккрк╛ркдрлНрк░ ркХрк╛ркоркЧрлАрк░рлА ркмрлВрк╕рлНркЯ ркЖрккрк╢рлЗ.

 ркбрк┐рклрлЙрк▓рлНркЯ ркХрлЗрк╢ рк╕рк▓рк╛ркоркд ркЫрлЗ, рккрк░ркВркдрлБ ркЬрлЛ ркдркорк╛рк░рлА рккрк╛рк╕рлЗ ркШркгрлА ркмркзрлА рк▓ркЦрк╡рк╛/ркжрлВрк░ ркХрк░рк╡рк╛ркирлА ркХрк╛ркоркЧрлАрк░рлА рк╣рлЛркп ркдрлЛ ркдрлЗ рк╕рк╛рк░рлБркВ рккрлНрк░ркжрк░рлНрк╢рки ркХрк░ркдрлБркВ ркиркерлА.
 ркХрлЛркИрккркг рк▓ркЦрк╡рк╛ ркЕркерк╡рк╛ ркжрлВрк░ ркХрк░рк╡рк╛ркирлА ркХрлНрк░рк┐ркпрк╛ рк╕ркоркЧрлНрк░ ркХрлЗрк╢ркирлЗ ркЕркорк╛ркирлНркп ркмркирк╛рк╡рлЗ ркЫрлЗ, ркЦрк╛ркдрк░рлА ркХрк░рлЛ ркХрлЗ рккркЫрлАркирк╛ рк╡рк╛ркВркЪрки ркЬрлЛрк╢рлЗ
 ркирк╡рлАркиркдрко рклрлЗрк░рклрк╛рк░рлЛ.

 ### CLI ркЯрлВрк▓рлНрк╕
 ркЬрлЛ ркдркорлЗ CLI ркЯрлВрк▓ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлА рк░рк╣рлНркпрк╛ркВ ркЫрлЛ ркЬрлЗрко ркХрлЗ [mobiletto-cli](https://www.npmjs.com/package/mobiletto-cli),
 ркдркорлЗ ркЪрлЛркХрлНркХрк╕рккркгрлЗ redis ркХрлЗрк╢ркирлЗ рк╕ркХрлНрк╖рко ркХрк░рк╡рк╛ ркорк╛ркВркЧрлЛ ркЫрлЛ, ркХрк╛рк░ркг ркХрлЗ ркдрлЗ `mo` ркЖркжрлЗрк╢ркирлА рк╡рк┐ркиркВркдрлАркУ ркжрк░ркорк┐ркпрк╛рки ркЪрк╛рк▓рлЗ ркЫрлЗ.

 ## ркорк┐рк░рк░рк┐ркВркЧ

    // Copy a local filesystem mobiletto to S3
    s3.mirror(local)

    // Mirror a local subdirectory from one mobiletto to an S3 mobiletto, with it's own subdirectory
    local.mirror(s3, 'some/local-folder', 'some/s3-folder')

 `mirror` ркЖркжрлЗрк╢ ркПркХ ркорлЛркмрк╛ркИрк▓ркерлА ркмрлАркЬрк╛ ркорлЛркмрк╛ркИрк▓ рккрк░ ркмркзрлА рклрк╛ркИрк▓рлЛркирлА ркПркХ рк╡ркЦркдркирлА ркиркХрк▓ ркХрк░рлЗ ркЫрлЗ.
 ркдрлЗ рк╕ркоркп рк╕рк╛ркерлЗ ркЕрк░рлАрк╕рк╛ркирлЗ ркЬрк╛рк│рк╡рк╡рк╛ ркорк╛ркЯрлЗ ркХрлЛркИ рккрлНрк░ркХрлНрк░рк┐ркпрк╛ ркЪрк▓рк╛рк╡ркдрлБркВ ркиркерлА. рклрк░рлАркерлА `mirror` ркЖркжрлЗрк╢ ркЪрк▓рк╛рк╡рлЛ
 ркХрлЛркИрккркг ркЦрлВркЯркдрлА рклрк╛ркЗрк▓рлЛркирлЗ рк╕рк┐ркВркХрлНрк░ркирк╛ркЗркЭ ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ.

 `mirror` ркорк╛ркВркерлА рк░рлАркЯрк░рлНрки рк╡рлЗрк▓рлНркпрлБ ркП ркПркХ рк╕рк░рк│ ркСркмрлНркЬрлЗркХрлНркЯ ркЫрлЗ ркЬрлЗркорк╛ркВ ркХрлЗркЯрк▓рлА рклрк╛ркЗрк▓рлЛ рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ рк╣ркдрлА ркдрлЗркирк╛ ркХрк╛ркЙркирлНркЯрк░рлНрк╕ ркЫрлЗ
 рккрлНрк░ркдрк┐ркмрк┐ркВркмрк┐ркд ркЕркирлЗ ркХрлЗркЯрк▓рлА рклрк╛ркЗрк▓рлЛркорк╛ркВ ркнрлВрк▓рлЛ рк╣ркдрлА:

    {
      success: count-of-files-mirrored,
      errors: count-of-files-with-errors
    }

 ркЪрлЗркдрк╡ркгрлА: ркорлЛркЯрк╛ ркбрлЗркЯрк╛ рк╕рлЗркЯрлНрк╕ркирлЗ рккрлНрк░ркдрк┐ркмрк┐ркВркмрк┐ркд ркХрк░рк╡рлБркВ ркЦрлВркм ркЬ рк╕ркоркп ркорк╛ркВркЧрлА рк▓рлЗркдрлБркВ ркЕркирлЗ ркмрлЗркирлНркбрк╡рк┐ркбрлНрке-рк╕ркШрки рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ

 `mirror` ркХрлЙрк▓ рк╕рк┐ркорлЗркирлНркЯрк┐ркХрлНрк╕ рк╕рк╛ркерлЗ ркдрлЗ ркХрлЛркг ркЫрлЗ ркдрлЗ рк╕ркоркЬрк╡рк╛ркорк╛ркВ ркХрлЗркЯрк▓рлАркХрк╡рк╛рк░ ркорлВркВркЭрк╡ркгркорк╛ркВ ркорлВркХрлЗ ркЫрлЗ
 рк╡рк╛ркЪркХ ркЕркирлЗ рк▓рлЗркЦркХ ркХрлЛркг ркЫрлЗ. ркдрлЗркирлЗ ркЕрк╕рк╛ркЗркиркорлЗркирлНркЯ рк╕рлНркЯрлЗркЯркорлЗркирлНркЯркирлА ркЬрлЗрко ркХрк▓рлНрккркирк╛ ркХрк░рлЛ: "ркбрк╛ркмрк╛ рк╣рк╛ркеркирлЛ ркорлЛркмрк╛ркИрк▓"
 ркдрлЗ рк╡рк╕рлНркдрлБркирлЗ рк╕рлЛркВрккрк╡рк╛ркорк╛ркВ ркЖрк╡рлА рк░рк╣рлА ркЫрлЗ (ркорк┐рк░рк░ ркХрк░рлЗрк▓ ркбрлЗркЯрк╛ рк▓ркЦрк╛ркпрлЗрк▓рлЛ), ркЕркирлЗ "ркЬркоркгрлЗ рк╣рк╛ркерлЗ ркорлЛркмрк╛ркЗрк▓ркЯрлЛ" (ркЖ
 `mirror` рккркжрлНркзркдрк┐ркирлА ркжрк▓рлАрк▓) ркП рк╕рлЛркВрккрлЗрк▓ ркорлВрк▓рлНркп ркЫрлЗ (ркорк┐рк░рк░ ркХрк░рлЗрк▓ ркбрлЗркЯрк╛ рк╡рк╛ркВркЪрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ).

 ## рккрк╛рк░ркжрк░рлНрк╢ркХ ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки
 рккрк╛рк░ркжрк░рлНрк╢ркХ ркХрлНрк▓рк╛ркпркВркЯ-рк╕рк╛ркЗркб ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки рк╕ркХрлНрк╖рко ркХрк░рлЛ:

    // Pass encryption parameters
    const encryption = {
      // key is required, must be >= 16 chars
      key: randomstring.generate(128),

      // optional, the default is to derive IV from key
      // when set, IV must be >= 16 chars
      iv: randomstring.generate(128),

      // optional, the default is aes-256-cbc
      algo: 'aes-256-cbc'
    }
    const api = await mobiletto(driverName, key, secret, opts, encryption)

    // Subsequent write operations will encrypt data (client side) when writing
    // Subsequent read operations will decrypt data (client side) when reading

 рк╢рлБркВ ркеркИ рк░рк╣рлНркпрлБркВ ркЫрлЗ? ркПркХ ркЕрк▓ркЧ "ркбрк┐рк░рлЗркХрлНркЯрк░рлА ркПркирлНркЯрлНрк░рлА" (ркбрк╛ркпрк░ркирлНркЯ) ркбрк┐рк░рлЗркХрлНркЯрк░рлА (ркПркиркХрлНрк░рк┐рккрлНркЯрлЗркб) ркдрлЗркорк╛ркВ ркХркИ рклрк╛ркИрк▓рлЛ ркЫрлЗ ркдрлЗ ркЯрлНрк░рлЗркХ ркХрк░рлЗ ркЫрлЗ
 ркбрк┐рк░рлЗркХрлНркЯрк░рлА (ркЙрк░рлНрклрлЗ ркбрк╛ркпрк░ркирлНркЯ ркбрк┐рк░рлЗркХрлНркЯрк░рлА).
 * `list` ркЖркжрлЗрк╢ ркбрк┐рк░рлЗркХрлНркЯрк░рлА ркПркирлНркЯрлНрк░рлА рклрк╛ркЗрк▓рлЛркирлЗ рк╡рк╛ркВркЪрлЗ ркЫрлЗ, рк╕рлВркЪрк┐ркмркжрлНркз ркжрк░рлЗркХ рккрк╛ркеркирлЗ ркбрк┐ркХрлНрк░рк┐рккрлНркЯ ркХрк░рлЗ ркЫрлЗ; рккркЫрлА ркжрк░рлЗркХ рклрк╛ркЗрк▓ ркорк╛ркЯрлЗ ркорлЗркЯрк╛ркбрлЗркЯрк╛ рккрк░ркд ркХрк░рлЗ ркЫрлЗ
 * `list` ркЖркжрлЗрк╢рлЛ рк╡ркзрлБ ркмрк┐ркиркХрк╛рк░рлНркпркХрлНрк╖рко ркЫрлЗ, ркЦрк╛рк╕ ркХрк░рлАркирлЗ ркорлЛркЯрлА рк╕ркВркЦрлНркпрк╛ркорк╛ркВ рклрк╛ркЗрк▓рлЛ ркзрк░рк╛рк╡ркдрлА ркбрк┐рк░рлЗркХрлНркЯрк░рлАркУ ркорк╛ркЯрлЗ
 * `write` ркЖркжрлЗрк╢ ркжрк░рлЗркХ рккрлЗрк░рлЗркирлНркЯркирлА ркбрк╛ркпрк░ркирлНркЯ ркбрк╛ркпрк░рлЗркХрлНркЯрк░рлАркорк╛ркВ ркбрк╛ркпрк░ркирлНркЯ рклрк╛ркЗрк▓рлЛ рк▓ркЦрлЗ ркЫрлЗ, рккрлБркирк░рк╛рк╡рк░рлНркдрк┐ркд рк░рлАркдрлЗ; рккркЫрлА рклрк╛ркЗрк▓ рк▓ркЦрлЗ ркЫрлЗ
 ркбрк╛ркпрк░рлЗркХрлНркЯрк░рлА рк╡ркВрк╢рк╡рлЗрк▓рлЛркорк╛ркВ N = ркКркВркбрк╛ркИ рк╕рк╛ркерлЗ * `write` ркЖркжрлЗрк╢рлЛ O(N) рк▓ркЦрлЗ ркЫрлЗ.
 * `remove` ркХркорк╛ркирлНркб ркЕркирлБрк░рлВркк ркбрк╛ркпрк░ркирлНркЯ рклрк╛ркЗрк▓ркирлЗ ркжрлВрк░ ркХрк░рлЗ ркЫрлЗ, ркЕркирлЗ ркЬрлЛ ркЦрк╛рк▓рлА рк╣рлЛркп ркдрлЛ ркдрлЗркирк╛ рккрлЗрк░рлЗркирлНркЯркирлЗ рккрлБркирк░рк╛рк╡рк░рлНркдрк┐ркд рк░рлАркдрлЗ ркжрлВрк░ ркХрк░рлЗ ркЫрлЗ; рккркЫрлА рклрк╛ркИрк▓ ркжрлВрк░ ркХрк░рлЗ ркЫрлЗ
 * ркмрк┐рки-рккрлБркирк░рк╛рк╡рк░рлНркдрк┐ркд `remove` ркЖркжрлЗрк╢рлЛ O(N) рк░рлАркб ркЕркирлЗ рк╕ркВркнрк╡рк┐ркд рк░рлВрккрлЗ ркШркгрк╛ ркмркзрк╛ ркбрк┐рк▓рлАркЯ ркХрк░рк╢рлЗ, ркЬрлЗркорк╛ркВ ркбрк┐рк░рлЗркХрлНркЯрк░рлА рк╡ркВрк╢рк╡рлЗрк▓рлЛркорк╛ркВ N = ркКркВркбрк╛ркИ рк╣рк╢рлЗ.
 * ркорлЛркЯрлА ркЕркирлЗ ркбрлАркк рклрк╛ркЗрк▓рк╕рк┐рк╕рлНркЯрко рккрк░ рккрлБркирк░рк╛рк╡рк░рлНркдрк┐ркд `remove` ркХрк░рлЛ' ркЖркжрлЗрк╢рлЛ ркЦрк░рлНркЪрк╛рк│ рк╣рлЛркЗ рк╢ркХрлЗ ркЫрлЗ

 ркирлЛркВркз ркХрк░рлЛ ркХрлЗ ркХрлНрк▓рк╛ркпркВркЯ-рк╕рк╛ркЗркб ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки рк╕ркХрлНрк╖рко рк╣рлЛрк╡рк╛ ркЫркдрк╛ркВ, ркдркорк╛рк░рк╛ ркПркирлНркХрлНрк░рк┐рккрлНркЯрлЗркб рк╕рк░рлНрк╡рк░-рк╕рк╛ркЗркбркорк╛ркВ рк╕ркВрккрлВрк░рлНркг ркжрлГрк╢рлНркпркдрк╛ рк╕рк╛ркерлЗ рк╡рк┐рк░рлЛркзрлА
 рк╕рлНркЯрлЛрк░рлЗркЬ, ркХрлА рк╡ркЧрк░ рккркг, рк╣ркЬрлБ рккркг ркбрк┐рк░рлЗркХрлНркЯрк░рлАркУркирлА ркХрлБрк▓ рк╕ркВркЦрлНркпрк╛ ркЕркирлЗ ркжрк░рлЗркХркорк╛ркВ ркХрлЗркЯрк▓рлА рклрк╛ркИрк▓рлЛ ркЫрлЗ ркЕркирлЗ рк╕рк╛ркерлЗ ркЬрлЛркИ рк╢ркХрлЗ ркЫрлЗ
 ркХрлЗркЯрк▓рк╛ркХ рккрлНрк░ркпркдрлНркирлЛ, ркбрк┐рк░рлЗркХрлНркЯрк░рлА рккркжрк╛ркирлБркХрлНрк░ркоркирлА ркХрлЗркЯрк▓рлАркХ ркЕркерк╡рк╛ ркмркзрлА ркПркХркВркжрк░ рк░ркЪркирк╛ рк╢рлЛркзрлЛ.
 *ркирлЛркВркз: рк╕рк╛рк░рлА рк╕рлБрк░ркХрлНрк╖рк╛ ркорк╛ркЯрлЗ рккрлНрк░ркорк╛ркгркорк╛ркВ рк╕рккрк╛ркЯ ркорк╛рк│ркЦрлБркВ рк╡рк╛рккрк░рлЛ.*
 рккрлНрк░ркдрк┐рк╕рлНрккрк░рлНркзрлА ркбрк┐рк░рлЗркХрлНркЯрк░рлАркУ/рклрк╛ркИрк▓рлЛркирк╛ ркирк╛рко ркЬрк╛ркгрк╢рлЗ ркирк╣рлАркВ рк╕рк┐рк╡рк╛ркп ркХрлЗ ркдрлЗркУ ркдркорк╛рк░рк╛ ркПркирлНркХрлНрк░рк┐рккрлНрк╢ркиркирлЗ рккркг ркЬрк╛ркгркдрк╛ рк╣рлЛркп
 ркХрлА ркЕркерк╡рк╛ ркЕркирлНркпркерк╛ рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ркПркирлНркХрлНрк░рк┐рккрлНрк╢рки ркХрлНрк░рлЗркХ ркХрк░рлНркпрлБркВ рк╣ркдрлБркВ. ркмркзрк╛ ркмрлЗркЯрлНрк╕ рккркЫрлА ркмркВркз ркЫрлЗ!

 ### рккрлНрк░ркжрк░рлНрк╢рки ркЕркирлЗ ркХрлЗрк╢рлАркВркЧ
 ркПркирлНркХрлНрк░рк┐рккрлНркЯрлЗркб рк╕рлНркЯрлЛрк░рлЗркЬ рккрк░ркирлА ркХрк╛ркоркЧрлАрк░рлА ркзрлАркорлА рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ. рккрлБркирк░рк╛рк╡рк░рлНркдрк┐ркд рк╕рлВркЪрк┐ркУ ркЕркирлЗ ркжрлВрк░ ркХрк░рк╡рк╛ркирлБркВ ркЦрлВркм ркзрлАркорлБркВ рк╣рлЛркИ рк╢ркХрлЗ ркЫрлЗ.
 redis ркжрлНрк╡рк╛рк░рк╛ ркХрлЗрк╢рк┐ркВркЧ ркЬркмрк░ркжрк╕рлНркд рк░рлАркдрлЗ ркоркжркж ркХрк░рлЗ ркЫрлЗ, рккрк░ркВркдрлБ ркирлЛркВркз ркХрк░рлЛ ркХрлЗ ркХрлЗрк╢ ркХрлЛркИрккркг рк▓ркЦрк╛ркг ркЕркерк╡рк╛ ркжрлВрк░ ркХрк░рк╡рк╛ рккрк░ рклрлНрк▓рк╢ ркерк╛ркп ркЫрлЗ.

 ## ркХрлА рккрк░рк┐ркнрлНрк░ркоркг
 ркдркорк╛рк░рлА ркирк╡рлА ркХрлА рк╡ркбрлЗ ркорлЛркмрк╛ркИрк▓ркЯрлЛ ркмркирк╛рк╡рлЛ, рккркЫрлА ркдрлЗркорк╛ркВ ркЬрлВркирк╛ ркбрлЗркЯрк╛ркирлЗ ркорк┐рк░рк░ ркХрк░рлЛ:

    const storage = require('mobiletto')

    const oldEncryption = { key: .... }
    const oldStorage = await storage.connect('s3', aws_key, aws_secret, {bucket: 'bk', region: 'us-east-1'}, oldEncryption)

    const newEncryption = { key: .... }
    const newStorage = await storage.connect('s3', aws_key, aws_secret, {bucket: 'zz', region: 'us-east-1'}, newEncryption)

    newStorage.mirror(oldStorage) // if oldStorage is very large, this may take a looooooong time...

 ## ркбрлНрк░рк╛ркИрк╡рк░ ркИркирлНркЯрк░рклрлЗрк╕
 ркбрлНрк░рк╛ркЗрк╡рк░ ркП ркХрлЛркИрккркг JS рклрк╛ркЗрк▓ ркЫрлЗ ркЬрлЗ ркЖ рк╣рк╕рлНркдрк╛ркХрлНрк╖рк░ рк╕рк╛ркерлЗ 'storageClient' рклркВркХрлНрк╢ркиркирлА ркирк┐ркХрк╛рк╕ ркХрк░рлЗ ркЫрлЗ:

    function storageClient (key, secret, opts)

 * `key` : ркПркХ рк╕рлНркЯрлНрк░рк┐ркВркЧ, ркдркорк╛рк░рлА API ркХрлА ( `local` ркбрлНрк░рк╛ркЗрк╡рк░ ркорк╛ркЯрлЗ ркЖ ркмрлЗркЭ ркбрк┐рк░рлЗркХрлНркЯрк░рлА ркЫрлЗ)
 * `secret` : ркПркХ рк╢ркмрлНркжркорк╛рк│рк╛, ркдркорк╛рк░рлБркВ API рк░рк╣рк╕рлНркп ( `local` ркбрлНрк░рк╛ркЗрк╡рк░ ркорк╛ркЯрлЗ ркЕрк╡ркЧркгрлА рк╢ркХрк╛ркп ркЫрлЗ)
 * `opts` : ркПркХ ркСркмрлНркЬрлЗркХрлНркЯ, ркЧрлБркгркзрк░рлНркорлЛ рккрлНрк░ркдрк┐-ркбрлНрк░рк╛ркЗрк╡рк░ ркЫрлЗ:
 * `local` ркорк╛ркЯрлЗ, `fileMode` ркЕркирлЗ `dirMode` ркЧрлБркгркзрк░рлНркорлЛ ркиркХрлНркХрлА ркХрк░рлЗ ркЫрлЗ ркХрлЗ ркирк╡рлА ркмркирк╛рк╡рк╡рк╛ркирлА рклрк╛ркЗрк▓рлЛ ркЕркирлЗ ркбрк┐рк░рлЗркХрлНркЯрк░рлАркУ ркХрлЗрк╡рлА рк░рлАркдрлЗ ркмркирк╛рк╡рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ
 * `s3` ркорк╛ркЯрлЗ, `bucket` ркЧрлБркгркзрк░рлНрко ркЬрк░рлВрк░рлА ркЫрлЗ. рк╡рлИркХрк▓рлНрккрк┐ркХ ркЧрлБркгркзрк░рлНркорлЛ ркЫрлЗ:
    * `region`: the S3 region, default is us-east-1
    * `prefix`: a prefix to prepend to all S3 paths, default is the empty string
    * `delimiter`: the directory delimiter, default is '/'

 ркСркмрлНркЬрлЗркХрлНркЯ ркХрлЗ ркЬрлЗ рк╕рлНркЯрлЛрк░рлЗркЬ ркХрлНрк▓рк╛ркпркВркЯ рклркВркХрлНрк╢рки ркЖрккрлЗ ркЫрлЗ ркдрлЗ ркЖ ркХрк╛рк░рлНркпрлЛркирлЗ рк╡рлНркпрк╛ркЦрлНркпрк╛ркпрк┐ркд ркХрк░рлЗ ркЫрлЗ:

    // Test the driver before using, ensure proper configuration
    async testConfig ()

    // List files in path (or from base-directory)
    // If recursive is true, list recursively
    // If visitor is defined, it will be an async function. await the visitor function on each file found
    // Otherwise, perform the listing and return an array of objects
    async list (path, recursive = false, visitor = null) // path may be omitted
    
    // Read metadata for a path
    async metadata (path)
    
    // Read a file
    // callback receives a chunk of data. endCallback is called at end-of-stream
    async read (path, callback, endCallback = null)

    // Write a file
    // driver must be able to handle a generator or a stream
    async write (path, generatorOrReadableStream)

    // Remove a file, or recursively delete a directory
    // returns a string of a single path removed, or an array of multiple paths removed
    async remove (path, recursive = false, quiet = false)

 ## рк▓рлЛркЧрлАркВркЧ
 Mobiletto [winston](https://www.npmjs.com/package/winston) рк▓рлЙркЧрк┐ркВркЧ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлАркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЗ ркЫрлЗ.

 рк▓рлЙркЧрлНрк╕ркорк╛ркВ **рклрк╛ркЗрк▓ рккрк╛рке ркЕркирлЗ ркнрлВрк▓ рк╕ркВркжрлЗрк╢рк╛ркУ рк╣рк╢рлЗ**, рккрк░ркВркдрлБ ркдрлЗркорк╛ркВ **ркХрлНркпрк╛рк░рлЗркп** ркХрлА, рк░рк╣рк╕рлНркпрлЛ,
 ркЕркерк╡рк╛ ркХрлЛркИрккркг ркЕркирлНркп ркХркирлЗркХрлНрк╢рки рк░рлВрккрк░рлЗркЦрк╛ркВркХрки ркорк╛рк╣рк┐ркдрлА.

 ### рк▓рлЛркЧ рк▓рлЗрк╡рк▓
 рк▓рлЛркЧ рк▓рлЗрк╡рк▓ рк╕рлЗркЯ ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ `MOBILETTO_LOG_LEVEL` рккрк░рлНркпрк╛рк╡рк░ркг ркЪрк▓ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЛ, ркПркХркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлАркирлЗ
 [https://www.npmjs.com/package/winston#logging-levels](https://www.npmjs.com/package/winston#logging-levels) ркорк╛ркВ рк╡рлНркпрк╛ркЦрлНркпрк╛ркпрк┐ркд `npm` рк╕рлНркдрк░рлЛркорк╛ркВркерлА

 ркбрк┐рклрлЙрк▓рлНркЯ рк╕рлНркдрк░ `error` ркЫрлЗ. рк╕рлМркерлА рк╡рк░рлНркмрлЛркЭ рк▓рлЗрк╡рк▓ `silly` ркЫрлЗ, ркЬрлЛ ркХрлЗ рк╣рк╛рк▓ркорк╛ркВ ркорлЛркмрк╛ркЗрк▓ркЯрлЛ
 `debug` ркирлАркЪрлЗркирк╛ рк╕рлНркдрк░рлЛ рккрк░ рк▓рлЛркЧ ркеркдрлБркВ ркиркерлА

    MOBILETTO_LOG_LEVEL=silly # maximum logs!

 ### рк▓рлЛркЧ рклрк╛ркИрк▓
 ркорлВрк│ркнрлВркд рк░рлАркдрлЗ, рк▓рлЛркЧрк░ ркХркирлНрк╕рлЛрк▓ рккрк░ рк▓ркЦрлЗ ркЫрлЗ. рклрк╛ркЗрк▓ркорк╛ркВ рк▓рлЛркЧ ркорлЛркХрк▓рк╡рк╛ ркорк╛ркЯрлЗ, `MOBILETTO_LOG_FILE` рк╕рлЗркЯ ркХрк░рлЛ
 рккрк░рлНркпрк╛рк╡рк░ркг ркЪрк▓. рклрк╛ркЗрк▓ркорк╛ркВ рк▓рлЛркЧрлАркВркЧ ркХрк░ркдрлА рк╡ркЦркдрлЗ, рк▓рлЛркЧрлНрк╕ рк╣рк╡рлЗ ркХркирлНрк╕рлЛрк▓ рккрк░ рк▓ркЦрк╡рк╛ркорк╛ркВ ркЖрк╡рк╢рлЗ ркирк╣рлАркВ.

    MOBILETTO_LOG_FILE=/var/my_mobiletto_log

 рк▓рлЛркЧрлАркВркЧ ркмркВркз ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ:

    MOBILETTO_LOG_FILE=/dev/null

</pre>
